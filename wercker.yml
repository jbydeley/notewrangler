box: node
build:
  # http://devcenter.wercker.com/docs/steps/index.html
  steps:
    # A step that executes `npm install` command
    - npm-install
    script:
      name: setup Firefox for unit test
      code: |
        ## set Firefox to use fake X from xvfbc
        test -e /tmp/.X99-lock || sudo /usr/bin/Xvfb :99 &
        export DISPLAY=:99.0
    # A step that executes `npm test` command
    - npm-test

deploy:
  steps:
    - gh-pages:
        token: $GIT_TOKEN
        domain: jbydeley.github.io
